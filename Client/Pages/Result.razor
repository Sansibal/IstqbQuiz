@page "/result"

<h3>Dein Ergebnis</h3>

@if (State.Questions.Count > 0)
{
    var total = State.Questions.Count;
    var score = State.Score;
    var prozent = (score * 100) / total;
    bool bestanden = score >= 26; // 65 % von 40 Fragen

    <div class="alert @(bestanden ? "alert-success" : "alert-danger")" role="alert">
        @if (bestanden)
        {
            <p><strong>Bestanden ✅</strong> – Glückwunsch! Du hast die erforderlichen 65 % erreicht.</p>
        }
        else
        {
            <p><strong>Nicht bestanden ❌</strong> – Du brauchst mindestens 26 Punkte.</p>
        }
    </div>

    <p><b>Punkte:</b> @score / @total (@prozent %)</p>

    <div class="mt-3">
        <button class="btn btn-primary me-2" @onclick="GoHome">Neues Quiz starten</button>
        <button class="btn btn-secondary" @onclick="ShowDetails">Details anzeigen</button>
    </div>
}
else
{
    <p>Keine Daten. Bitte starte ein neues Quiz.</p>
}

@code {
    [Inject]
    private QuizState State { get; set; } = default!;

    [Inject]
    private NavigationManager Nav { get; set; } = default!;

    void GoHome() => Nav.NavigateTo("/");
    void ShowDetails() => Nav.NavigateTo("/details");
}