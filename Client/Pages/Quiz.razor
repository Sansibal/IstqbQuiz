@page "/quiz"
@using Microsoft.AspNetCore.Components.Forms

<h3>Quiz starten</h3>

@if (currentQuestionIndex < questions.Count)
{
    <EditForm Model="this" OnValidSubmit="SubmitAnswer">
        <div>
            <p>@questions[currentQuestionIndex].QuestionText</p>

            <InputRadioGroup @bind-Value="selectedAnswer">
                @foreach (var answer in questions[currentQuestionIndex].Answers)
                {
                    <div>
                        <InputRadio Value="@answer" /> @answer
                    </div>
                }
            </InputRadioGroup>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Weiter</button>
    </EditForm>
}
else
{
    <p>Quiz abgeschlossen!</p>
    <a href="/result" class="btn btn-success">Ergebnis anzeigen</a>
}

@code {
    private List<Question> questions = new()
    {
        new Question { QuestionText = "Was ist Blazor?", Answers = new List<string>{ "Framework", "Programmiersprache", "Editor" } },
        new Question { QuestionText = "Welche Sprache nutzt Blazor?", Answers = new List<string>{ "C#", "Java", "Python" } }
    };

    private int currentQuestionIndex = 0;
    private string selectedAnswer = string.Empty;

    private void SubmitAnswer()
    {
        Console.WriteLine($"Antwort: {selectedAnswer}");
        currentQuestionIndex++;
        selectedAnswer = string.Empty;
    }

    public class Question
    {
        public string QuestionText { get; set; }
        public List<string> Answers { get; set; }
    }
}
